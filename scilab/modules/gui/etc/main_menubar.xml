<?xml version="1.0"?>
<menubar>

   <!-- All "main" menus are disabled when created and then enabled in scilab.start file after all macros are loaded -->

   <!-- File menu -->
   <menu label="File" mnemonic="F" enabled="false">
        <submenu label="Exec..." mnemonic="E">
            <callback 
            instruction="
              %fileToExec = xgetfile('*.sc*', getcwd(), 'Select a file to exec');
              if ~isempty(%fileToExec) then 
                exec(%fileToExec);
                disp('Exec done.');
              end
              clear %fileToExec isempty"
            type="0"/>
        </submenu> 
        <separator/>
        <submenu label="Open..." mnemonic="O"> 
            <callback 
            instruction="
              %fileToOpen = xgetfile('*.sc*', getcwd(), 'Select a file to open with Scipad');
              if ~isempty(%fileToOpen) then 
                scipad(%fileToOpen);
              end
              clear %fileToOpen isempty"
            type="0"/>
        </submenu> 
        <submenu label="Load environment..." mnemonic="L"> 
            <callback 
            instruction="
              %fileToLoad = xgetfile('*.sav', getcwd(), 'Select a file to load');
              if ~isempty(%fileToLoad) then 
                load(%fileToLoad);
                disp('Environment loaded.');
              end
              clear %fileToLoad isempty"
            type="0"/>
        </submenu> 
        <submenu label="Save environment..." mnemonic="S"> 
            <callback 
            instruction="
              %fileToSave = xgetfile('*.sav', getcwd(), 'Select a file to write');
              if ~isempty(%fileToSave) then
                if isempty(fileparts(%fileToSave, 'extension')) then
                  %fileToSave = %fileToSave + '.sav';
                end
                save(%fileToSave);
                disp('Environment saved.');
              end
              clear %fileToSave isempty fileparts"
            type="0"/>
        </submenu>
        <separator/>
        <submenu label="Change current directory..." mnemonic="C"> 
            <callback 
            instruction="
              %newDir = uigetdir(getcwd(), 'Select a directory');
              if ~isempty(%newDir) then 
                cd(%newDir);
              end
              clear %newDir isempty"
            type="0"/>
        </submenu> 
        <submenu label="Display current directory" mnemonic="D">
            <callback instruction="if iswaitingforinput() then printf('\n%s\n\n%s\n',prompt(),getcwd()); else printf('\n\n%s\n\n',getcwd());end" type="0"/>
        </submenu> 
        <separator/>
        <submenu label="Print setup..." mnemonic="R"> 
             <callback instruction="notavailablemessage();" type="0"/>
        </submenu>
        <submenu label="Print" mnemonic="P"> 
             <callback instruction="notavailablemessage();" type="0"/>
        </submenu>
        <separator/>
        <submenu label="Quit" mnemonic="Q"> 
            <callback instruction="exit();" type="0"/>
        </submenu>
    </menu>

    <!-- Edit menu -->
    <menu label="Edit" mnemonic="E" enabled="false">
        <submenu label="Cut" mnemonic="U"> 
            <callback instruction="org.scilab.modules.gui.bridge.CallScilabBridge.cutConsoleSelection" type="3"/>
        </submenu>
        <submenu label="Copy" mnemonic="C"> 
            <callback instruction="org.scilab.modules.gui.bridge.CallScilabBridge.copyConsoleSelection" type="3"/>
        </submenu>
        <submenu label="Paste" mnemonic="P"> 
            <callback instruction="org.scilab.modules.gui.bridge.CallScilabBridge.pasteClipboardIntoConsole" type="3"/>
        </submenu>
        <separator/>
        <submenu label="Empty clipboard" mnemonic="L"> 
            <callback instruction="org.scilab.modules.gui.bridge.CallScilabBridge.emptyClipboard" type="3"/>
        </submenu>
        <separator/>
        <submenu label="Select all" mnemonic="S"> 
            <callback instruction="org.scilab.modules.gui.bridge.CallScilabBridge.selectAllConsoleContents" type="3"/>
        </submenu>
    </menu>

    <!-- Preferences menu -->
    <menu label="Preferences" mnemonic="P" enabled="false">
        <submenu label="Language" mnemonic="L"> 
              <callback instruction="notavailablemessage();" type="0"/>
        </submenu>
        <submenu label="Colors" mnemonic="C"> 
            <submenu label="Console Background..." mnemonic="B"> 
                <callback instruction="org.scilab.modules.gui.bridge.CallScilabBridge.changeConsoleBackground" type="3"/>
            </submenu>
            <submenu label="Console Font..." mnemonic="B"> 
                <callback instruction="org.scilab.modules.gui.bridge.CallScilabBridge.changeConsoleForeground" type="3"/>
            </submenu>
        </submenu>
        <submenu label="Font..." mnemonic="N"> 
            <callback instruction="org.scilab.modules.gui.bridge.CallScilabBridge.changeConsoleFont" type="3"/>
        </submenu>
        <submenu label="Show/Hide Toolbar" mnemonic="L"> 
              <callback 
              instruction="
                if toolbar(-1)=='on' then
                  toolbar(-1, 'off');
                else
                  toolbar(-1, 'on');
                end"
              type="0"/>
        </submenu>
        <separator/>
        <submenu label="Clear History" mnemonic="H"> 
           <callback instruction="org.scilab.modules.gui.bridge.CallScilabBridge.clearHistory" type="3"/>
        </submenu>
        <submenu label="Clear Console" mnemonic="O"> 
          <callback instruction="org.scilab.modules.gui.bridge.CallScilabBridge.clear" type="3"/>
        </submenu>
    </menu>

    <!-- Control menu -->
    <menu label="Control" mnemonic="C" enabled="false">
        <submenu label="Resume" mnemonic="R"> 
            <callback instruction="resume;" type="0"/>
        </submenu>
        <submenu label="Abort" mnemonic="A"> 
            <callback instruction="abort;" type="0"/>
        </submenu>
        <submenu label="Interrupt" mnemonic="I"> 
            <callback instruction="pause;" type="0"/>
        </submenu>
    </menu>

    <!-- Applications menu -->
    <menu label="Applications" mnemonic="A" enabled="false">
        <submenu label="Editor" mnemonic="S"> 
            <callback instruction="scipad();" type="0"/>
        </submenu>
        <separator/>
        <submenu label="Scicos" mnemonic="S"> 
            <callback instruction="scicos();" type="0"/>
        </submenu>
        <separator/>
        <submenu label="EditGraph" mnemonic="E"> 
            <callback instruction="edit_graph();" type="0"/>
        </submenu>
        <separator/>
        <submenu label="Matlab to Scilab translator" mnemonic="M"> 
            <callback instruction="mfile2sci();" type="0"/>
        </submenu>
        <separator/>
        <submenu label="Variable Editor" mnemonic="V"> 
            <callback instruction="browsevar();" type="0"/>
        </submenu>
    </menu>

    <!-- Help menu -->
    <menu label="?" mnemonic="?" enabled="false">
        <submenu label="Scilab Help" mnemonic="S"> 
            <callback instruction="help();" type="0"/>
        </submenu>
        <separator/>
        <submenu label="Scilab demonstrations" mnemonic="D">
             <callback instruction="scilab_demos();" type="0"/>
        </submenu> 
        <separator/>
        <submenu label="Web links" mnemonic="W"> 
            <submenu label="Scilab Web Site" mnemonic="W"> 
                <callback instruction="org.scilab.modules.gui.bridge.CallScilabBridge.openScilabWebSite" type="3"/>
            </submenu>
            <submenu label="Contributions" mnemonic="C"> 
                <callback instruction="org.scilab.modules.gui.bridge.CallScilabBridge.openContributionsWebSite" type="3"/>
            </submenu>
            <submenu label="Bug And Request database" mnemonic="R"> 
                <callback instruction="org.scilab.modules.gui.bridge.CallScilabBridge.openBugzillaWebSite" type="3"/>
            </submenu>
            <submenu label="Newsgroup Archives" mnemonic="N"> 
                <callback instruction="org.scilab.modules.gui.bridge.CallScilabBridge.openNewsgroupWebSite" type="3"/>
            </submenu>
        </submenu>
        <separator/>
        <submenu label="About Scilab..." mnemonic="A"> 
              <callback instruction="about()" type="0"/>
        </submenu>
    </menu>
</menubar>