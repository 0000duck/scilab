<?xml version="1.0"?>
<!-- [SCILAB_FIGURE_ID] pattern is replaced at generation of Java menu by the ID of the figure --> 
<menubar>
    <menu label="File" mnemonic="F">
        <submenu label="New figure..." mnemonic="N"> 
            <callback instruction="scf();" type="0"/>
        </submenu>
        <separator/>
        <submenu label="Load..." mnemonic="L"> 
            <callback 
            instruction="
              %fileToLoad = xgetfile('*.scg', getcwd(), 'Select a file to load');
              if ~isempty(%fileToLoad) then 
                xload(%fileToLoad,[SCILAB_FIGURE_ID]);
                disp('Figure loaded.');
              end
              clear %fileToLoad"
            type="0"/>
        </submenu> 
        <submenu label="Save..." mnemonic="S"> 
             <callback 
            instruction="
              %fileToSave = xgetfile('*.scg', getcwd(), 'Select a file to write');
              if ~isempty(%fileToSave) then
                if isempty(fileparts(%fileToSave, 'extension')) then
                  %fileToSave = %fileToSave + '.scg';
                end
                xsave(%fileToSave, get_figure_handle([SCILAB_FIGURE_ID]));
                disp('Figure saved.');
              end
              clear %fileToSave isempty fileparts"
            type="0"/>
        </submenu>
        <separator/>
		<submenu label="Export to ..." mnemonic="E">
			<submenu label="BMP" mnemonic="E"> 
				<callback 
				instruction="
				%fileToWrite = xgetfile('*.bmp', getcwd(), 'Select a file name');
				if ~isempty(%fileToWrite) then 
					xs2bmp([SCILAB_FIGURE_ID], %fileToWrite);
				end
				clear %fileToWrite"
				type="0"/>
			</submenu>
			<submenu label="GIF" mnemonic="E"> 
				<callback 
				instruction="
				%fileToWrite = xgetfile('*.gif', getcwd(), 'Select a file name');
				if ~isempty(%fileToWrite) then 
					xs2gif([SCILAB_FIGURE_ID], %fileToWrite);
				end
				clear %fileToWrite"
				type="0"/>
			</submenu>
			<submenu label="JPG" mnemonic="E"> 
				<callback 
				instruction="
				%fileToWrite = xgetfile('*.jpg', getcwd(), 'Select a file name');
				if ~isempty(%fileToWrite) then 
					xs2jpg([SCILAB_FIGURE_ID], %fileToWrite);
				end
				clear %fileToWrite"
				type="0"/>
			</submenu>
			<submenu label="PNG" mnemonic="E"> 
				<callback 
				instruction="
				%fileToWrite = xgetfile('*.png', getcwd(), 'Select a file name');
				if ~isempty(%fileToWrite) then 
					xs2png([SCILAB_FIGURE_ID], %fileToWrite);
				end
				clear %fileToWrite"
				type="0"/>
			</submenu>
			<submenu label="PPM" mnemonic="E"> 
				<callback 
				instruction="
				%fileToWrite = xgetfile('*.ppm', getcwd(), 'Select a file name');
				if ~isempty(%fileToWrite) then 
					xs2ppm([SCILAB_FIGURE_ID], %fileToWrite);
				end
				clear %fileToWrite"
				type="0"/>
			</submenu>
		</submenu>
        <submenu label="Copy to clipboard" mnemonic="C"> 
            <callback instruction="notavailablemessage();" type="0"/>
        </submenu>
        <separator/>
        <submenu label="Print setup..." mnemonic="R"> 
            <callback instruction="notavailablemessage();" type="0"/>
        </submenu>
        <submenu label="Print" mnemonic="P"> 
            <callback instruction="notavailablemessage();" type="0"/>
        </submenu>
        <separator/>
        <submenu label="Close" mnemonic="C">
            <callback instruction="delete(get_figure_handle([SCILAB_FIGURE_ID]));" type="0"/>
        </submenu> 
    </menu>

    <menu label="Tools" mnemonic="T">
        <submenu label="Show/Hide Toolbar" mnemonic="T"> 
             <callback 
             instruction="
               if toolbar([SCILAB_FIGURE_ID])=='on' then
                 toolbar([SCILAB_FIGURE_ID], 'off');
               else
                 toolbar([SCILAB_FIGURE_ID], 'on');
               end"
             type="0"/>
        </submenu>
        <separator/>
        <submenu label="Zoom" mnemonic="Z"> 
          <callback instruction="zoom_rect(get_figure_handle([SCILAB_FIGURE_ID]))" type="0"/>
        </submenu>
        <submenu label="UnZoom" mnemonic="U"> 
          <callback instruction="unzoom(get_figure_handle([SCILAB_FIGURE_ID]))" type="0"/>
        </submenu>
        <separator/>
        <submenu label="2D/3D Rotation" mnemonic="R"> 
            <callback instruction="rotate_axes(get_figure_handle([SCILAB_FIGURE_ID]))" type="0"/>
        </submenu>
    </menu>

    <menu label="Edit" mnemonic="E">
        <submenu label="Select as current figure" mnemonic="S"> 
            <callback instruction="scf([SCILAB_FIGURE_ID]);" type="0"/>
        </submenu> 
        <submenu label="Redraw figure" mnemonic="R"> 
            <callback instruction="xbasr([SCILAB_FIGURE_ID]);" type="0"/>
        </submenu> 
        <submenu label="Clear figure" mnemonic="C">
            <callback instruction="clf(get_figure_handle([SCILAB_FIGURE_ID]));" type="0"/>
        </submenu> 
        <separator/>
        <submenu label="Figure properties" mnemonic="F"> 
            <callback instruction="ged(8,[SCILAB_FIGURE_ID]);" type="0"/>
        </submenu> 
        <submenu label="Axes properties" mnemonic="A"> 
            <callback instruction="ged(9,[SCILAB_FIGURE_ID]);" type="0"/>
        </submenu> 
        <separator/>
        <submenu label="Start entity picker" mnemonic="S"> 
            <callback instruction="ged(10,[SCILAB_FIGURE_ID]);" type="0"/>
        </submenu> 
        <submenu label="Stop entity picker" mnemonic="T"> 
            <callback instruction="ged(11,[SCILAB_FIGURE_ID]);" type="0"/>
        </submenu>
    </menu>

    <menu label="?" mnemonic="?">
        <submenu label="Scilab Help" mnemonic="S"> 
            <callback instruction="help();" type="0"/>
        </submenu>
        <separator/>
        <submenu label="About Scilab..." mnemonic="A"> 
            <callback instruction="about()" type="0"/>
        </submenu>
    </menu>
</menubar>
