<?xml version="1.0" encoding="UTF-8"?>
<!--
Allan CORNET
INRIA 2007
-->
<project name="javasci" default="compile">

  <property name="rootdirectory"  location="../../../.." />
  <property name="dist"  location="${rootdirectory}/java/jar/modules" />

<!--
a voir sous linux ...
-->
  <taskdef resource="checkstyletask.properties" classpath="${rootdirectory}/java/checkstyle/checkstyle-all-4.3.jar"/>
   
  <description>
			build javasci module
  </description>

	<target name="checkstyle-scilab">
		<checkstyle config="${rootdirectory}/checkstyle/scilab_checkstyle_convention.xml">
  		<fileset dir="javasci" includes="**/*.java"/>
  		<!-- Location of cache-file. -->
  		<property key="checkstyle.cache.file" file="build/cachefile"/>
		</checkstyle> 
	</target>
    
  <target name="init">
		<!-- Create the time stamp -->
			<tstamp/>
	</target>    

  <target name="clean" description="clean sources">
  	<delete dir="build"/>
		<delete file="${dist}/javasci.jar"/>
	</target>

<!-- 
  <target name="compile" description="build sources" depends="init,checkstyle-scilab">
-->
  <target name="compile" description="build sources" depends="init">
		<mkdir dir="build/classes"/>
    <javac srcdir="javasci" destdir="build/classes"/>
  </target>

  <target name="jar" description="do .jar file" depends="compile">
		<jar destfile="${dist}/javasci.jar" basedir="build/classes">
			<manifest>
      	<attribute name="SciAbstractDataType" value="javasci.SciAbstractDataType"/>
      	<attribute name="SciBooleanArray" value="javasci.SciBooleanArray"/>
        <attribute name="SciComplexArray" value="javasci.SciComplexArray"/>
        <attribute name="SciDoubleArray" value="javasci.SciDoubleArray"/>
        <attribute name="SciString" value="javasci.SciString"/>
        <attribute name="BadDataArgumentException" value="javasci.BadDataArgumentException"/>
        <attribute name="SciAbstractArray" value="javasci.SciAbstractArray"/>
        <attribute name="SciBoolean" value="javasci.SciBoolean"/>
        <attribute name="SciComplex" value="javasci.SciComplex"/>
        <attribute name="SciDouble" value="javasci.SciDouble"/>
        <attribute name="Scilab" value="javasci.Scilab"/>
        <attribute name="SciStringArray" value="javasci.SciStringArray"/>
        <attribute name="ClassPath" value="javasci.ClassPath"/>
     	</manifest>
   	</jar>
	</target>

</project>
