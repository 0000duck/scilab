<?xml version="1.0" encoding="UTF-8"?>
<refentry version="5.0-subset Scilab"
          xml:id="math_rendering_features_in_graphic" xml:lang="en"
          xmlns="http://docbook.org/ns/docbook"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          xmlns:svg="http://www.w3.org/2000/svg"
          xmlns:ns3="http://www.w3.org/1999/xhtml"
          xmlns:mml="http://www.w3.org/1998/Math/MathML"
          xmlns:db="http://docbook.org/ns/docbook">
  <info>
    <pubdate>$LastChangedDate$</pubdate>
  </info>

  <refnamediv>
    <refname>Rendu d'équations mathématiques dans le graphique Scilab
    </refname>

    <refpurpose>Affiche les équations mathématiques dans le graphique Scilab
    grâce à MathML ou LaTeX.</refpurpose>
  </refnamediv>

  <refsection>
    <title>Usage</title>

    <para>A partir de Scilab 5.2, Il est possible d'écrire dans le graphique
    Scilab des équations LaTeX ou MathML.</para>

    <para>Les expressions LaTeX doivent commencer par $ et se terminer $ (le
    caractère dollar) tant que les expressions MathML doivent commencer par
    &lt; et se terminer par &gt; avec une syntaxe valide.</para>

    <para>A la première utilisation (les bibliothèques sont chargées à la
    volée uniquement quand nécessaire), le moteur MathML est plus lent à
    charger que celui LaTeX.</para>

    <programlisting>// Example with LaTeX / MathML ticks:
plot2d();
a=gca();

mathml="&lt;mrow&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;msup&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msup&gt;&lt;/mfrac&gt;&lt;/mrow&gt;";
// LaTeX and MathML mixed expression
a.x_ticks.labels=[mathml;"1";"$\sin(x)$";"3";"$\cos(a) - test$";"5";"6";"7"];
</programlisting>
  </refsection>

  <refsection>
    <title>Description LaTeX </title>
<para>Le rendu est basé sur la bibliothèque Java JLaTeXMath. Il s'agit d'une implémentation du mode mathématique de LaTeX. L'ensemble des commandes LaTeX de base sont gérées (s'il en manque une, n'hésitez pas à soumettre un rapport de bug), par contre celles de TeX, comme <literal>\over</literal> ne le sont pas.
</para>
    <programlisting role="example">
xtitle('$\textstyle\sum_{n=1}^{+\infty}\frac1{n^2}=\frac{\pi^2}{6}$')
xtitle('$\big(\bigg)$')
xtitle('$\mbox{Vector field for }\ddot{\theta}=\sin\theta$')
xtitle('$\JLaTeXMath\ \mathfrak{and}\ \mathtt{Scilab}$')
</programlisting>
<para>JLaTeXMath fournit plusieurs polices utilisables avec les commandes <literal>\mathbb</literal>, <literal>\mathscr</literal>, <literal>\mathcal</literal>, <literal>\mathbf</literal>, <literal>\mathit</literal>, <literal>\mathsf</literal>, <literal>\mathtt</literal>, <literal>\mathfrak</literal>, <literal>\mathds</literal>, <literal>\mathrm</literal>, ainsi que leurs versions grasses quand elles existent activables avec la commande <literal>\boldsymbol</literal> :
</para>

    <programlisting role="example">
xtitle('$\mathbb{SCILAB}\ \mathsf{or}\ \boldsymbol{\mathfrak{Scilab}}$')
xtitle('$\mathscr{C}\mbox{ n''est pas }\boldsymbol{\mathcal{C}}$')
</programlisting>
<para>Différents packages LaTeX sont disponibles : <replaceable>amsmath</replaceable>, <replaceable>amssymb</replaceable>, <replaceable>stmaryrd</replaceable>, <replaceable>amsxtra</replaceable> et <replaceable>accents</replaceable> ainsi que quelques commandes de <replaceable>graphics</replaceable>. La plupart des commandes de ces packages sont disponibles (il en manque quelques unes d'<replaceable>amsmath</replaceable> en l'occurence).
</para>
    <programlisting role="example">
xtitle('$\sideset{_\alpha^\beta}{_\gamma^\delta}\prod$')
xtitle('$\hat{\accentset{\star}{\hat h}}\undertilde{ABC}$')
xtitle('$\begin{pmatrix}\mathfrak{a}&amp;\alpha\\\mathbb{A}&amp;\mathcal{A}\end{pmatrix}$')
xtitle('$\left(\frac{\pi}{\sqrt[3]{2}}\middle|\sqrt{\frac{1+\frac1x}}{x}\right\rangle$')
xtitle('$\doublecup\ddag\fatbslash\lll\oplus\ovee\circledcirc\circlearrowright$')
xtitle('$\rotatebox{-20}{\boxed{\JLaTeXMath}}\reflectedbox{\JLaTeXMath}$')
</programlisting>

<para>Il y a la possibilité de définir de nouvelles commandes ou de nouveaux environnements :</para>

    <programlisting role="example">
xtitle('$\newcommand{\op}{\left(}\newcommand{\cp}{\right)} \op\frac12\cp$')
xtitle('$\newcommand{\myfrac}[2]{\frac{\mathfrak{#1}}{\mathcal{#2}}}\myfrac{A}{B}$')
</programlisting>
  </refsection>

  <refsection>
    <title>MathML description</title>

    <para>Le rendu MathML est basé sur Jeuclid. Jeuclid est une implémentation
    de MathML qui couvre l'ensemble de la spécification. Ainsi, l'ensemble du
    langage MathML est supporté dans Scilab.</para>

    <para>Cependant, du à la taille de la bibliothèque, à la première
    utilisation, le moteur peut prendre jusqu'à quelques secondes à se
    charger. Toutefois, les utilisations suivantes seront très rapides.</para>

    <programlisting>plot3d();
a=get("current_axes");
a.x_label.font_size= 5;
a.x_label.text="&lt;mrow&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;mo&gt;&lt;/mo&gt;&lt;mfenced open=""{"" close=""}""&gt;&lt;mrow&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;/mfenced&gt;&lt;/mrow&gt;"</programlisting>
  </refsection>
</refentry>
