##########
### Sylvestre Ledru <sylvestre.ledru@inria.fr>
### INRIA - Scilab 2006
##########

CORE_C_SOURCES = \
src/c/inffic.c \
src/c/cs2st.c \
src/c/tmpdir.c \
src/c/intmacr2tree.c \
src/c/fromjava.c \
src/c/cvstr.c \
src/c/run.c \
src/c/FTables.c \
src/c/InitScilab.c \
src/c/getval.c \
src/c/md5.c \
src/c/addinter.c \
src/c/inisci-c.c \
src/c/IsAScalar.c \
src/c/texmacs.c \
src/c/userf2.c \
src/c/msgstxt.c \
src/c/sciquit.c \
src/c/stack1.c \
src/c/scicurdir.c \
src/c/realmain.c \
src/c/stack3.c \
src/c/str2sci.c \
src/c/cluni0.c \
src/c/flags.c \
src/c/getmodules.c \
src/c/fromc.c \
src/c/setgetSCIpath.c \
src/c/getmemory.c \
src/c/Funtab.c \
src/c/csignal.c \
src/c/prompt.c \
src/c/CallScilab.c \
src/c/SendScilabJobs.c \
src/c/scimem.c \
src/c/banier.c \
src/c/callinterf.c \
src/c/isanan.c \
src/c/parse.c \
src/c/timer.c \
src/c/stack2.c \
src/c/sciprint.c \
src/c/sciprint_nd.c \
src/c/link.c \
src/c/xscion.c \
src/c/SetScilabEnvironment.c \
src/c/hashtable_core.c \
src/c/returnanan.c \
src/c/LoadFunctionsTab.c \
src/c/with_module.c \
src/c/loadversion.c \
src/c/version.c \
src/c/stackinfo.c \
src/c/scirun.c \
src/c/SCIHOME.c \
src/c/warningmode.c \
src/c/InitializeCore.c \
src/c/TerminateCore.c \
src/c/coretable.c \
src/c/error_scilab.c \
src/c/message_scilab.c \
src/c/force_link.c \
src/c/returnProperty.c \
src/c/returnPropertyList.c \
src/c/scilabmode.c \
src/c/GetXmlFileEncoding.c \
src/c/msgs.c \
src/c/GetenvB.c \
src/c/islittleendian.c \
src/c/filesmanagement.c \
src/c/terme.c \
src/c/ifexpr.c \
src/c/expr.c \
src/c/getcommandlineargs.c \
src/c/syncexec.c \
src/c/getfastcode.c  \
src/c/callFunctionFromGateway.c \
src/c/librarieslist.c \
src/c/libraryinfo.c \
src/c/getvariablesname.c \
src/c/commandwords.c \
src/c/ScilabEventsLoop.c

CORE_FORTRAN_SOURCES = src/fortran/algebre.f \
src/fortran/clunit.f \
src/fortran/complexify.f \
src/fortran/allowptr.f \
src/fortran/dldsp.f \
src/fortran/bcol.f \
src/fortran/getlin.f \
src/fortran/isany.f \
src/fortran/hmcreate.f \
src/fortran/nextj.f \
src/fortran/functionsforbasout.f \
src/fortran/setgetmode.f \
src/fortran/errmsgf.f \
src/fortran/showstack.f \
src/fortran/misops.f \
src/fortran/iseye.f \
src/fortran/chkvar.f \
src/fortran/setippty.f \
src/fortran/compil.f \
src/fortran/funnam.f \
src/fortran/isnum.f \
src/fortran/cmdstr.f \
src/fortran/logops.f \
src/fortran/atome.f \
src/fortran/hndlops.f \
src/fortran/cmplxt.f \
src/fortran/skpins.f \
src/fortran/folhp.f \
src/fortran/cvname.f \
src/fortran/funs.f \
src/fortran/fact.f \
src/fortran/inibrk.f \
src/fortran/typ2cod.f \
src/fortran/prompt.f \
src/fortran/intstr.f \
src/fortran/createref.f \
src/fortran/btof.f \
src/fortran/matzs.f \
src/fortran/getnum.f \
src/fortran/btofm.f \
src/fortran/getsym.f \
src/fortran/findequal.f \
src/fortran/stackg.f \
src/fortran/find.f \
src/fortran/israt.f \
src/fortran/setlnb.f \
src/fortran/mrknmd.f \
src/fortran/stackgl.f \
src/fortran/allops.f \
src/fortran/print.f \
src/fortran/mname.f \
src/fortran/prntid.f \
src/fortran/command.f \
src/fortran/ref2val.f \
src/fortran/namstr.f \
src/fortran/stack.f \
src/fortran/isbrk.f \
src/fortran/majmin.f \
src/fortran/dmdspf.f \
src/fortran/xerbla.f \
src/fortran/dtosci.f \
src/fortran/bexec.f \
src/fortran/varfunptr.f \
src/fortran/getfun.f \
src/fortran/savlod.f \
src/fortran/error.f \
src/fortran/cvdm.f \
src/fortran/tradsl.f \
src/fortran/mkindx.f \
src/fortran/whatln.f \
src/fortran/errmgr.f \
src/fortran/defmat.f \
src/fortran/mklist.f \
src/fortran/dmdsp.f \
src/fortran/sigbas.f \
src/fortran/indxg.f \
src/fortran/matz.f \
src/fortran/istrue.f \
src/fortran/inisci.f \
src/fortran/ptover.f \
src/fortran/getfunction.f \
src/fortran/stackp.f \
src/fortran/dbasin.f \
src/fortran/macro.f \
src/fortran/lspdsp.f \
src/fortran/extlarg.f \
src/fortran/getstr.f \
src/fortran/cvwm.f \
src/fortran/storeglobal.f \
src/fortran/lst2vars.f \
src/fortran/fmttyp.f \
src/fortran/basnms.f \
src/fortran/matc.f \
src/fortran/ptrback.f \
src/fortran/getch.f \
src/fortran/ftob.f \
src/fortran/seteol.f \
src/fortran/basin.f \
src/fortran/clause.f \
src/fortran/compcl.f \
src/fortran/termf.f \
src/fortran/expsum.f \
src/fortran/eqid.f \
src/fortran/copyvar.f \
src/fortran/putid.f \
src/fortran/itosci.f \
src/fortran/formatnumber.f \
src/fortran/wmdsp.f \
src/fortran/stackr2d.f \
src/fortran/stacki2d.f \
src/fortran/stackc2i.f

GATEWAY_C_SOURCES = sci_gateway/c/sci_stacksize.c \
sci_gateway/c/sci_resume.c \
sci_gateway/c/sci_mtlb_mode.c \
sci_gateway/c/sci_banner.c \
sci_gateway/c/sci_where.c \
sci_gateway/c/sci_errcatch.c \
sci_gateway/c/sci_getos.c \
sci_gateway/c/sci_ulink.c \
sci_gateway/c/sci_format.c \
sci_gateway/c/sci_fromjava.c \
sci_gateway/c/sci_link.c \
sci_gateway/c/sci_getmemory.c \
sci_gateway/c/sci_fromc.c \
sci_gateway/c/sci_havewindow.c \
sci_gateway/c/sci_delbpt.c \
sci_gateway/c/sci_macr2lst.c \
sci_gateway/c/sci_isdef.c \
sci_gateway/c/sci_addinter.c \
sci_gateway/c/sci_isglobal.c \
sci_gateway/c/sci_who.c \
sci_gateway/c/sci_c_link.c \
sci_gateway/c/sci_errclear.c \
sci_gateway/c/sci_global.c \
sci_gateway/c/sci_funcprot.c \
sci_gateway/c/sci_newfun.c \
sci_gateway/c/sci_warning.c \
sci_gateway/c/sci_dispbpt.c \
sci_gateway/c/sci_whereis.c \
sci_gateway/c/sci_intppty.c \
sci_gateway/c/sci_ieee.c \
sci_gateway/c/sci_gstacksize.c \
sci_gateway/c/sci_lasterror.c \
sci_gateway/c/sci_funptr.c \
sci_gateway/c/sci_return.c \
sci_gateway/c/sci_exists.c \
sci_gateway/c/sci_getmd5.c \
sci_gateway/c/sci_clear.c \
sci_gateway/c/sci_chdir.c \
sci_gateway/c/sci_comp.c \
sci_gateway/c/sci_clearfun.c \
sci_gateway/c/sci_setbpt.c \
sci_gateway/c/sci_getmodules.c \
sci_gateway/c/sci_what.c \
sci_gateway/c/sci_predef.c \
sci_gateway/c/sci_clearglobal.c \
sci_gateway/c/sci_arg.c \
sci_gateway/c/sci_call.c \
sci_gateway/c/sci_getcwd.c \
sci_gateway/c/sci_type.c \
sci_gateway/c/sci_typename.c \
sci_gateway/c/sci_mode.c \
sci_gateway/c/sci_macr2tree.c \
sci_gateway/c/sci_iserror.c \
sci_gateway/c/sci_getversion.c \
sci_gateway/c/sci_debug.c \
sci_gateway/c/gw_core.c \
sci_gateway/c/gw_user.c \
sci_gateway/c/gw_user2.c \
sci_gateway/c/sci_error.c \
sci_gateway/c/sci_sciargs.c \
sci_gateway/c/sci_with_module.c \
sci_gateway/c/sci_getdynlibext.c \
sci_gateway/c/sci_islittleendian.c \
sci_gateway/c/sci_getscilabmode.c \
sci_gateway/c/sci_librarieslist.c \
sci_gateway/c/sci_libraryinfo.c \
sci_gateway/c/sci_getvariablesonstack.c


GATEWAY_FORTRAN_SOURCES =  sci_gateway/fortran/sci_errclear.f \
sci_gateway/fortran/sci_c_link.f \
sci_gateway/fortran/sci_funcprot.f \
sci_gateway/fortran/sci_global.f \
sci_gateway/fortran/sci_mtlb_mode.f \
sci_gateway/fortran/sci_resume.f \
sci_gateway/fortran/sci_dispbpt.f \
sci_gateway/fortran/sci_useascommand.f \
sci_gateway/fortran/sci_whereis.f \
sci_gateway/fortran/sci_intppty.f \
sci_gateway/fortran/sci_ieee.f \
sci_gateway/fortran/sci_macrovar.f \
sci_gateway/fortran/sci_funptr.f \
sci_gateway/fortran/sci_exists.f \
sci_gateway/fortran/sci_errcatch.f \
sci_gateway/fortran/sci_clear.f \
sci_gateway/fortran/sci_argn.f \
sci_gateway/fortran/sci_format.f \
sci_gateway/fortran/sci_link.f \
sci_gateway/fortran/sci_comp.f \
sci_gateway/fortran/sci_setbpt.f \
sci_gateway/fortran/sci_predef.f \
sci_gateway/fortran/sci_typnam.f \
sci_gateway/fortran/sci_clearglobal.f \
sci_gateway/fortran/sci_fort.f \
sci_gateway/fortran/sci_delbpt.f \
sci_gateway/fortran/where.f \
sci_gateway/fortran/sci_iserror.f \
sci_gateway/fortran/sci_type.f \
sci_gateway/fortran/sci_mode.f \
sci_gateway/fortran/sci_addinter.f \
sci_gateway/fortran/sci_debug.f \
sci_gateway/fortran/sci_error.f \
sci_gateway/fortran/sci_isglobal.f

MODULE_CHECKS = unit_tests/comment.tst \
	unit_tests/errcatch.tst \
	unit_tests/scilab.tst \
	unit_tests/calpol.tst \
	unit_tests/clause.tst \
	unit_tests/auto.tst \
	unit_tests/breakpoints.tst \
	unit_tests/cmp.tst \
	unit_tests/comand.tst \
	unit_tests/display.tst \
	unit_tests/elem.tst \
	unit_tests/fptr.tst \
	unit_tests/function.tst \
	unit_tests/global.tst \
	unit_tests/macro.tst \
	unit_tests/matops.tst \
	unit_tests/matsys.tst \
	unit_tests/matelm.tst \
	unit_tests/opcode.tst \
	unit_tests/parse.tst \
	unit_tests/pause.tst \
	unit_tests/trycatch.tst \
	unit_tests/resume.tst

libscicore_la_CFLAGS=  	-Iincludes/ \
			-Isrc/c/ \
			-I$(top_srcdir)/libs/MALLOC/includes/ \
			$(XML_FLAGS) \
			-I$(top_srcdir)/libs/doublylinkedlist/includes \
			-I$(top_srcdir)/modules/action_binding/includes \
			-I$(top_srcdir)/modules/output_stream/includes


libscicore_la_LDFLAGS = $(XML_LIBS)
pkglib_LTLIBRARIES = libscicore.la

libscicore_la_SOURCES = $(CORE_C_SOURCES) $(CORE_FORTRAN_SOURCES) $(GATEWAY_C_SOURCES) $(GATEWAY_FORTRAN_SOURCES) $(JNI_SOURCES)

libscicore_la_LIBADD = \
	$(top_builddir)/libs/blas/libsciblas.la \
	$(top_builddir)/libs/lapack/libscilapack.la \
	$(top_builddir)/libs/MALLOC/libscimalloc.la \
	$(top_builddir)/modules/cacsd/libscicacsd.la \
	$(top_builddir)/modules/differential_equations/libscidifferential_equations.la \
	$(top_builddir)/modules/polynomials/libscipolynomials.la \
	$(top_builddir)/modules/elementary_functions/libscielementary_functions.la \
	$(top_builddir)/modules/signal_processing/libscisignal_processing.la \
	$(top_builddir)/modules/fileio/libscifileio.la \
	$(top_builddir)/modules/string/libscistring.la


#### Target ######
modulename=core

#### core : Conf files ####
libscicore_la_rootdir = $(mydatadir)
libscicore_la_root_DATA = changelog.txt licence.txt readme.txt version.xml


#### core : init scripts ####
libscicore_la_etcdir = $(mydatadir)/etc
libscicore_la_etc_DATA = etc/core.quit etc/core.start

#### core : gateway declaration ####
libscicore_la_sci_gatewaydir = $(mydatadir)/sci_gateway
libscicore_la_sci_gateway_DATA = sci_gateway/core_gateway.xml

#### core :  dtd files ####
libscicore_la_xmldir = $(mydatadir)/xml
libscicore_la_xml_DATA = xml/modules.dtd xml/version.dtd

#### core : include files ####
libscicore_la_includedir=$(pkgincludedir)/core
libscicore_la_include_HEADERS = includes/GetExceptionCode.h \
includes/CallScilab.h \
includes/IsAScalar.h \
includes/sciprint.h \
includes/intmacr2tree.h \
includes/core_math.h \
includes/stack-def.h \
includes/xscion.h \
includes/stack.h \
includes/setgetSCIpath.h \
includes/getmodules.h \
includes/callinter.h \
includes/sciquit.h \
includes/gw_core.h \
includes/stack-c.h \
includes/version.h \
includes/Os_specific.h \
includes/stack1.h \
includes/SetScilabEnvironment.h \
includes/returnanan.h \
includes/stack2.h \
includes/realmain.h \
includes/stack3.h \
includes/machine.h \
includes/ExceptionMessage.h \
includes/prompt.h \
includes/loadversion.h \
includes/tmpdir.h \
includes/SCIHOME.h \
includes/warningmode.h \
includes/InitializeCore.h \
includes/FTables.h \
includes/scirun.h \
includes/fromjava.h \
includes/inisci-c.h \
includes/cvstr.h \
includes/error_scilab.h \
includes/GetXmlFileEncoding.h \
includes/syncexec.h \
includes/getfastcode.h \
includes/callFunctionFromGateway.h \
includes/librarieslist.h \
includes/libraryinfo.h \
includes/getvariablesname.h \
includes/commandwords.h \
includes/existfunction.h \
includes/getfunctionslist.h \
includes/ScilabEventsLoop.h \
includes/timerEvents.h



#### core : demos files ####
libscicore_la_demosintrodir=$(mydatadir)/demos/intro/
libscicore_la_demosintro_DATA = demos/intro/extf.sce \
demos/intro/Makefile.mak \
demos/intro/MakeC.mak \
demos/intro/MakeF.mak \
demos/intro/dem01.dem \
demos/intro/extc.sce \
demos/intro/Makefile

include $(top_srcdir)/Makefile.incl.am

